---
import Profile from "@components/Profile.astro";
import BaseLayout from "@layouts/BaseLayout.astro";
import SocialLinks from "@components/SocialLinks.astro";
import LinkButtons from "@components/LinkButtons.astro";

export async function getStaticPaths() {
  return [
    { params: { username: 'juan_flores' } },
    { params: { username: 'usuario2' } },
    { params: { username: 'usuario3' } },
  ];
}

const { username } = Astro.params;

type ProfileData = {
  name: string;
  description: string;
  profilePicture: string;
  socialLinks?: { url: string; icon: string; name: string }[];
  links?: { url: string; title: string }[];
  style: string;
};

const profiles: Record<string, ProfileData> = {
  juan_flores: {
    name: '@Juan_Flores',
    description: 'Hola, mi nombre es Juan Carlos!',
    profilePicture: '/images/profile-image.webp',
    style: '/styles/usuario1.css',
    socialLinks: [
      { url: 'https://mobile.twitter.com/Juank_Syek', icon: '/svg/x.svg', name: 'Twitter' },
      { url: 'https://linkedin.com/in/juank-flores', icon: '/svg/linkedin.svg', name: 'LinkedIn' },
      { url: 'https://github.com/juanksyek', icon: '/svg/github.svg', name: 'GitHub' },
      { url: 'https://www.instagram.com/juank_syek', icon: '/svg/instagram.svg', name: 'Instagram' },
    ],
    links: [
      { url: 'https://juanflores-portafolio.netlify.app/', title: 'Mi WebSite' },
      { url: 'https://youtu.be/QjTeCG7_guM?si=nsLIT_7yAs84nAJ0', title: 'Like a Villain?' },
      { url: 'https://portfolio.com', title: 'Chek this playlist on Spotify' },
    ],
  },
  usuario2: {
    name: 'Usuario 2',
    description: 'Este es el perfil del Usuario 2.',
    profilePicture: '/images/usuario2.jpg',
    style: '/styles/usuario2.css',
  },
  usuario3: {
    name: 'Usuario 3',
    description: 'Este es el perfil del Usuario 3.',
    profilePicture: '/images/usuario3.jpg',
    style: '/styles/usuario3.css',
  },
};

const profile = profiles[username as string];

if (!profile) {
  throw new Error(`El usuario ${username} no existe.`);
}
---

<head>
  <link rel="stylesheet" href={profile.style} />
</head>

<BaseLayout>
  <Profile {...profile} />
  <SocialLinks socialLinks={profile.socialLinks} />
  <LinkButtons links={profile.links}/>
</BaseLayout>
