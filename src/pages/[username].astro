---
import Profile from "@components/Profile.astro";
import BaseLayout from "@layouts/BaseLayout.astro";
import SocialLinks from "@components/SocialLinks.astro";
import LinkButtons from "@components/LinkButtons.astro";
import ShareButton from "@components/ShareButton.astro";

export async function getStaticPaths() {
  return [
    { params: { username: 'juan_flores' } },
    { params: { username: 'dan_reynolds' } },
    { params: { username: 'cyberpunk_2077' } },
    { params: { username: 'who_is'}},
    { params: { username: 'access'}}
  ];
}

const { username } = Astro.params;

type ProfileData = {
  name: string;
  description: string;
  profilePicture: string;
  socialLinks?: { url: string; icon: string; name: string }[];
  links?: { url: string; title: string }[];
  style: string;
  iframeSrc: string;
  iframeSrc2: string
};

const profiles: Record<string, ProfileData> = {
  juan_flores: {
    name: '@Juan_Flores',
    description: 'Hola, mi nombre es Juan Carlos!',
    profilePicture: '/images/profile-image.webp',
    style: '/styles/usuario1.css',
    socialLinks: [
      { url: 'https://mobile.twitter.com/Juank_Syek', icon: '/svg/x.svg', name: 'Twitter' },
      { url: 'https://linkedin.com/in/juank-flores', icon: '/svg/linkedin.svg', name: 'LinkedIn' },
      { url: 'https://github.com/juanksyek', icon: '/svg/github.svg', name: 'GitHub' },
      { url: 'https://www.instagram.com/juank_syek', icon: '/svg/instagram.svg', name: 'Instagram' },
    ],
    links: [
      { url: 'https://juanflores-portafolio.netlify.app/', title: 'Mi WebSite' },
      { url: 'https://youtu.be/Aibxit_PpAg?si=HDgCoklDTwOMk8Dv', title: 'Like a Villain?' },
      { url: 'https://open.spotify.com/playlist/0F9NeDG86JHVLwIb3y0DEk?si=c24146b1ffda4aaf', title: 'Chek this playlist on Spotify' },
      { url: 'https://www.notion.so/eb02d6323c134c55a05c5ca1e8ee3d18?v=f8828d071c9349a596a6a4f66e3fd5b6&pvs=4', title: 'My movies list in notion' },
    ],
    iframeSrc: 'https://open.spotify.com/embed/playlist/43mnKzy2LaOV1q6LhsJERY?utm_source=generator',
    iframeSrc2: '',
  },
  dan_reynolds: {
    name: '@DanReynolds',
    description: 'Hello there, im Dan Reynolds from Imagine Dragons',
    profilePicture: '/images/danreynolds.webp',
    style: '/styles/usuario2.css',
    socialLinks: [
      { url: 'https://open.spotify.com/intl-es/artist/3k3gbUT7bF0jYmFmAKBQtU?si=MER9_0oTQRarWB-n12jBkg', icon: '/svg/spotify.svg', name: 'Twitter' },
      { url: 'https://www.youtube.com/@ImagineDragons', icon: '/svg/youtube.svg', name: 'LinkedIn' },
      { url: 'https://x.com/DanReynolds', icon: '/svg/x.svg', name: 'X' },
      { url: 'https://www.instagram.com/danreynolds/?hl=es', icon: '/svg/instagram.svg', name: 'Instagram' },
    ],
    links: [
      { url: 'https://udiscover.mx/collections/imagine-dragons', title: 'Shop' },
      { url: 'https://open.spotify.com/intl-es/album/7EPrkhjTBrwAV8yAKCmY0Y?si=319IZVxvSiWpz79krnrEEQ', title: 'Check the new album!' },
      { url: 'https://youtu.be/jvl1xbijjAI?si=aJoQG6b_qZLXiJxk', title: 'Look awesome cover' },
      { url: 'https://open.spotify.com/intl-es/track/5hKE4hbAVMP38XWjRlXZPO?si=c718ea0ff3d34258', title: 'Masterpice from the new album' },
    ],
    iframeSrc: '',
    iframeSrc2: 'https://open.spotify.com/embed/album/7EPrkhjTBrwAV8yAKCmY0Y?utm_source=generator',
  },
  cyberpunk_2077: {
    name: '@Cyberpunk 2077',
    description: 'Welcome to the New United States, chum',
    profilePicture: '/images/cyberpunk.webp',
    style: '/styles/usuario3.css',
    links: [
      { url: 'https://www.cyberpunk.net/mx/en/cyberpunk-2077', title: 'Cyberpunk 2077' },
      { url: 'https://www.cyberpunk.net/mx/en/phantom-liberty', title: 'Phantom Liberty' },
      { url: 'https://www.cyberpunk.net/en/edgerunners', title: 'Edgerunners' },
      { url: 'https://gear.cdprojektred.com/', title: 'CD PROYECT GEAR' },
    ],
    socialLinks: [
      { url: 'https://www.facebook.com/CyberpunkGame', icon: '/svg/facebook-tag.svg', name: 'Facebook' },
      { url: 'https://www.youtube.com/user/CyberPunkGame', icon: '/svg/youtube.svg', name: 'Youtube' },
      { url: 'https://www.instagram.com/cyberpunkgame/', icon: '/svg/instagram.svg', name: 'Instagram' },
      { url: 'https://x.com/cyberpunkgame', icon: '/svg/x.svg', name: 'X' },
    ],
    iframeSrc: '',
    iframeSrc2: '',
  },
  who_is: {
    name: '@____?____',
    description: 'How did you get here?',
    profilePicture: '/svg/help-circle.svg',
    style: '/styles/usuario4.css',
    links: [
      { url: '', title: '?' },
      { url: '', title: '?' },
      { url: '/access', title: '?' },
      { url: '', title: '?' },
    ],
    socialLinks: [
      { url: '', icon: '/svg/help-circle.svg', name: '?' },
      { url: '', icon: '/svg/help-circle.svg', name: '?' },
      { url: '', icon: '/svg/help-circle.svg', name: '?' },
      { url: '', icon: '/svg/help-circle.svg', name: '?' },
    ],
    iframeSrc: '',
    iframeSrc2: '',
  },
  access: {
    name: 'Incredible, you find my secret',
    description: 'maybe you need click any buttons... again',
    profilePicture: '/svg/help-circle.svg',
    style: '/styles/access.css',
    links: [
      { url: '', title: '?' },
      { url: '', title: '?' },
      { url: 'https://youtu.be/IBcUkTXAwbw?si=XutN33ky-xVPlUrj', title: '?' },
      { url: '', title: '?' },
    ],
    socialLinks: [
      { url: '', icon: '/svg/help-circle.svg', name: '?' },
      { url: '', icon: '/svg/help-circle.svg', name: '?' },
      { url: '', icon: '/svg/help-circle.svg', name: '?' },
      { url: '', icon: '/svg/help-circle.svg', name: '?' },
    ],
    iframeSrc: '',
    iframeSrc2: '',
  },
};

const profile = profiles[username as string];

if (!profile) {
  throw new Error(`El usuario ${username} no existe.`);
}
---

<head>
  <link rel="stylesheet" href={profile.style} />
</head>

<BaseLayout>
  <ShareButton />
  <Profile {...profile} />
  <SocialLinks socialLinks={profile.socialLinks} />
  {profile.iframeSrc && (
    <iframe
      style="border-radius:12px"
      src={profile.iframeSrc}
      width="100%"
      height="152"
      frameborder="0"
      allowfullscreen=""
      allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
      loading="lazy"></iframe>
  )}
  {profile.iframeSrc2 && (
    <iframe 
      style="border-radius:12px" 
      src={profile.iframeSrc2} 
      width="100%" 
      height="152" 
      frameborder="0" 
      allowfullscreen="" 
      allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
      loading="lazy">
    </iframe>
  )}
  <LinkButtons links={profile.links} />
  {username === 'who_is' && (
    <video autoplay muted loop id="background-video">
      <source src="/video/glitch-video.mp4" type="video/mp4" />
      Your browser does not support the video tag.
    </video>
  )}
</BaseLayout>
